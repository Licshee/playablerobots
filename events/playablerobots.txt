namespace = playablerobots

pop_event = {
    id = playablerobots.1
    hide_window = yes

    trigger = {
        has_trait = trait_android
        exists = owner
        NOT = { is_exact_same_species = owner }
    }

    immediate = {
        owner = {
            root = {
                change_pop_species = PREV
            }
        }
    }
}

# Add level1 trait if "robotic workers" tech researched
country_event = {
    id = playablerobots.3
    hide_window = yes

    trigger = {
        has_trait = trait_android
        NOT = {has_trait = trait_android_level1}

        has_technology = tech_robotic_workers
        NOT = { has_technology = tech_droid_workers }
        NOT = { has_technology = tech_synthetic_workers }
    }

    immediate = {
        random_owned_pop = {
            limit = {
                pop_has_trait = trait_android
            }
            create_species = {
                name = this
                plural = this
                class = this
                portrait = this
                traits = this

                new_pop_resource_requirement = {
                    type = robot_food
                    value = 30.0
                }
                pops_auto_growth = 1.2
                pops_can_be_colonizers = yes
                pops_can_migrate = yes
                pops_can_reproduce = no
                pops_can_join_factions = yes
                pop_maintenance = 0.9
                can_generate_leaders = yes
                pops_can_be_slaves = yes
                can_be_modified = yes
                pops_have_happiness = yes
            }
        }
        change_dominant_species = last_created_species
        modify_species = {
            species = ROOT
            add_trait = trait_android_level1
        }
    }
}

# Add level2 trait if "droids" tech researched
country_event = {
    id = playablerobots.4
    hide_window = yes

    trigger = {
        has_trait = trait_android
        NOT = {has_trait = trait_android_level2}

        has_technology = tech_droid_workers
        NOT = { has_technology = tech_synthetic_workers }
    }

    immediate = {
        random_owned_pop = {
            limit = {
                pop_has_trait = trait_android
            }
            create_species = {
                name = this
                plural = this
                class = this
                portrait = this
                traits = this

                new_pop_resource_requirement = {
                    type = robot_food
                    value = 30.0
                }
                pops_auto_growth = 1.4
                pops_can_be_colonizers = yes
                pops_can_migrate = yes
                pops_can_reproduce = no
                pops_can_join_factions = yes
                pop_maintenance = 0.8
                can_generate_leaders = yes
                pops_can_be_slaves = yes
                can_be_modified = yes
                pops_have_happiness = yes
            }
        }
        change_dominant_species = last_created_species
        modify_species = {
            species = ROOT
            remove_trait = trait_android_level1
            add_trait = trait_android_level2
        }
    }
}

# Add level3 trait if "synthetics" tech researched
country_event = {
    id = playablerobots.5
    hide_window = yes

    trigger = {
        has_trait = trait_android
        NOT = {has_trait = trait_android_level3}

        has_technology = tech_synthetic_workers
    }

    immediate = {
        random_owned_pop = {
            limit = {
                pop_has_trait = trait_android
            }
            create_species = {
                name = this
                plural = this
                class = this
                portrait = this
                traits = this

                new_pop_resource_requirement = {
                    type = robot_food
                    value = 30.0
                }
                pops_auto_growth = 1.6
                pops_can_be_colonizers = yes
                pops_can_migrate = yes
                pops_can_reproduce = no
                pops_can_join_factions = yes
                pop_maintenance = 0.7
                can_generate_leaders = yes
                pops_can_be_slaves = yes
                can_be_modified = yes
                pops_have_happiness = yes
            }
        }
        change_dominant_species = last_created_species
        modify_species = {
            species = ROOT
            remove_trait = trait_android_level2
            add_trait = trait_android_level3
        }
    }
}

country_event = {
    id = playablerobots.7
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        sectors > 0
        has_country_edict  = playablerobots_sector
        is_ai = no
        has_country_resource = {
            type = minerals
            amount > 100
        }
        has_country_resource = {
            type = energy
            amount > 250
        }
        any_owned_planet = {
            #limit = {
            #	NOT = { sector_controlled = no }
            #}
            any_tile = {
                AND = {
                        has_grown_pop = no
                        has_growing_pop = no
                        has_blocker = no
                    }
            }
        }
    }

    mean_time_to_happen = { days = 350 }

    #immediate = {
    #}

    option = {
        name = OK
        random_owned_planet = {
            limit = {
                    sector_controlled = yes
            }
            if = {
                limit = {
                    owner = {
                        NOT = { has_technology  = tech_robotic_workers }
                    }
                }
                owner = {
                    add_minerals = -30
                    add_energy = -100
                }
            }
            if = {
                limit = {
                    owner = {
                        has_technology  = tech_robotic_workers
                        NOT = { has_technology  = tech_droid_workers }
                    }
                }
                owner = {
                    add_minerals = -40
                    add_energy = -125
                }
            }
            if = {
                limit = {
                    owner = {
                        has_technology  = tech_droid_workers
                        NOT = { has_technology  = tech_synthetic_workers }
                    }
                }
                owner = {
                    add_minerals = -50
                    add_energy = -150
                }
            }
            if = {
                limit = {
                    owner = {
                        has_technology  = tech_synthetic_workers
                    }
                }
                owner = {
                    add_minerals = -60
                    add_energy = -175
                }
            }
            best_tile_for_pop = {
                create_pop = {
                    species = owner_main_species
                    ethos = owner
                }
            }
        }
    }
}

country_event = {
    id = playablerobots.8
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        has_trait = trait_android
        has_country_edict  = playablerobots_immortal
        is_ai = no
        NOT = { has_modifier = playablerobots_immortal_modifier }
    }

    mean_time_to_happen = { days = 1 }

    #immediate = {
    #}

    option = {
        name = OK
        add_modifier = {
            modifier = "playablerobots_immortal_modifier"
            days = -1
        }
    }
}

country_event = {
    id = playablerobots.9
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        has_trait = trait_android
        NOT = { has_country_edict  = playablerobots_immortal }
        is_ai = no
        has_modifier = playablerobots_immortal_modifier
    }

    mean_time_to_happen = { days = 1 }

    #immediate = {
    #}

    option = {
        name = OK
        remove_modifier = playablerobots_immortal_modifier
    }
}

country_event = {
    id = playablerobots.10
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        OR = {
            has_government = technocratic_confederacy
            has_government = technocratic_hegemony
        }
        is_ai = yes
    }

    mean_time_to_happen = { days = 1 }

    #immediate = {
    #}

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = military_republic
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = theocratic_republic
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = direct_democracy
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = moral_democracy
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = indirect_democracy
    }
}

country_event = {
    id = playablerobots.14
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        OR = {
            has_government = neural_cooperative
            has_government = neural_collective
        }
        is_ai = yes
    }

    mean_time_to_happen = { days = 1 }

    #immediate = {
    #}

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = military_junta
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = theocratic_oligarchy
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = science_directorate
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = peaceful_bureaucracy
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = plutocratic_oligarchy
    }
}

country_event = {
    id = playablerobots.15
    title = playablerobots.2.title
    desc = tutorial.14.desc
    picture = GFX_evt_playablerobots
    hide_window = yes
    #is_triggered_only = yes

    trigger = {
        OR = {
            has_government = collective_consciousness
            has_government = collective_intelligence
        }
        is_ai = yes
    }

    mean_time_to_happen = { days = 1 }

    #immediate = {
    #}

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = military_dictatorship
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = divine_mandate
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = despotic_hegemony
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = enlightened_monarchy
    }

    option = {
        name = OK
        ai_chance = {
            factor = 33
        }
        change_government = despotic_empire
    }
}
